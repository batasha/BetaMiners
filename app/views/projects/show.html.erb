  <div class="row">
    <header class="left-header">
      <h1><%= @project.name %></h1>
      <em>Development Phase: <%= @test.name %></em>
    </header>

    <div class="span8">
      <div id="carousel" class="small">
        <ul>
          <% for image in @images %>
            <li>
              <%= image_tag image.url(:large) %>
            </li>
          <% end %>
        </ul>

        <div id="carousel-nav" class="small">
            <button class="prev">‹</button>
            <button class="next">›</button>
        </div>
      </div>

      <article>
        <%= @project.description.html_safe %>
      </article>
    </div>

    <div class="span3 offset1">

      <% if @reg %>
        <%= button_to "Stop Testing", project_registration_path(@project, @reg),
          method: :delete, class: "btn btn-large btn-primary" %>
          <hr>

        <%= button_to "Access Website", url_with_protocol(@project.url), method: :get, class: "btn btn-large btn-success" %>

        <%= button_to "Leave Feedback", new_project_feedback_path(@project), method: :get, class: "btn btn-large btn-info" %>

      <% else %>
        <%= button_to "Sign up to Test", project_registrations_path(@project), class: "btn btn-large btn-primary" %>
      <% end %>
    </div>
  </div>


<script>

  var Carousel = (function() {

    var delay = 5000;
    var $carousel = $("#carousel");
    var $itemsHolder = $carousel.find("> ul");
    var $items = $itemsHolder.find("> li");
    var itemWidth = $items.first().width();
    var currentItem = -1;
    var timerId;

    var $nextButton = $("#carousel-nav > .next");
    var $previousButton = $("#carousel-nav > .prev");

    var init = function() {
      $itemsHolder.css({"width": ($items.length * itemWidth) + "px"});
      bind();
      start();
    };

    var bind = function () {
      $nextButton.on("click", loop);
      $previousButton.on("click", previous)
    };

    var start = function() {
      loop();
      timerId = window.setInterval(loop, delay);
    };

    var stop = function() {
      if(timerId) {
        window.clearInterval(timerId);
      }
    };

    var loop = function() {
      currentItem++;

      if (currentItem == $items.length) {
        currentItem = 0;
      }

      move();
    };

    var previous = function() {
      currentItem--;

      if (currentItem <= 0) {
        currentItem = $items.length - 1;
      }

      move();
    };

    var move = function() {
      var leftPosition = currentItem * itemWidth * -1;
      $itemsHolder.stop().animate({"left": leftPosition + "px"}, 1000);
    };

    return {
      init: init,
      loop: loop,
      start: start,
      stop: stop
    };
  })();

  $(document).ready(function() {
    Carousel.init();
  });
</script>